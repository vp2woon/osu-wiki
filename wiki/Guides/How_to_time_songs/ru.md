---
needs_cleanup: true  # нужно переписать в более формальном стиле и обновить в соответствии с актуальной информацией (это к оригиналу)
---

# Настройка тайминга

## Небольшое вступление

На самом деле, тайминг песен вовсе не так сложен, как может показаться на первый взгляд; для него требуются всего лишь две вещи: чувство ритма и некоторое количество времени. Навык хорошей игры не обязателен, но не помешает.

Итак, если ты играешь в osu! и со слухом у тебя всё в порядке, то можно начать. Предполагается, что ты знаешь, что такое [BPM](/wiki/Music_theory/Tempo) и [оффсет](/wiki/Offset), и умеешь создавать ненаследуемые секции (красные полоски).

## Подготовка mp3

Если ты собираешься серьёзно работать с картой, например, вести её на ранк, нужно, чтобы её битрейт был не больше 192 и не меньше 128 кбит/с (делается это для того, чтобы песни были приемлемого качества и не занимали много места на сервере); посмотреть битрейт аудио можно через свойства файла на самой последней вкладке. Как и чем понизить его до нужной величины (обычно 192 кбит/с), ищи [здесь](http://www.google.ru/search?q=понижение+битрейта+mp3).

К подготовке файла относится и обрезание части трека или наложение каких-то эффектов. Всё это лучше делать до выставления тайминга, поскольку **любое** редактирование аудио, в том числе и смена битрейта, изменит тайминг.

## Обычный тайминг

### Цели и задачи

Практически в любой песне, в любой мелодии есть определённый ритм, составляющий её основу. Именно в соответствии с ритмом построена вся песня; ему следуют музыкальные инструменты, а если в песне есть слова, они ложатся на этот ритм и поются в соответствии с ним. Музыка построена вполне закономерно, иначе бы она не была музыкой.

Если пытаться как-то представить строение музыки, можно взять обычную линейку: деления на ней — это места, на которых расположены ноты, а расстояние между ними задаётся [темпом](/wiki/Music_theory/Tempo) песни (чем она быстрей, тем ближе друг к другу находятся ноты). К слову сказать, именно так и работает шкала времени в редакторе (та, что сверху). Продолжая аналогию, можно сказать, что оффсет трека — это момент времени, откуда начинатся линейка, то есть место появления самого первого бита, или начало самого первого такта (об этом — чуть ниже). Кроме этого, можно заглянуть на [Википедию](http://ru.wikipedia.org/wiki/Ритм) и прочитать статью там.

Из всего вышесказанного следует то, что достаточно поймать ритм песни и определить, откуда он начинается, чтобы успешно её затаймить. Расстояние между нотами за нас рассчитает редактор, нам останется только выбрать правильные деления шкалы и затем начать расставлять ноты.

Итак, план действий:

1. Определить примерный темп (BPM) песни и оффсет для аудиофайла,
2. Подогнать оффсет максимально точно к реальному,
3. Подогнать BPM максимально точно к реальному,
4. Выбрать правильный размер такта,
5. Протестировать результат; если требуется — повторить пункты 2 и 3.

### Поиск BPM и оффсета

При поиске этих двух вещей будем ориентироваться на ударные, то есть на те инструменты, которые и создают ритм. Найти их интуитивно просто — под ударные можно, к примеру, равномерно постукивать пальцами по столу, качать головой или совершать другие ритмичные движения. Иногда в музыке нет ударных, но есть звуки, похожие на них своей ритмичностью. Также можно ориентироваться на интонации исполнителя и следовать его ритму.

Итак, нажимаем «пробел», находясь в редакторе, и начинаем слушать трек с самого начала, пока не дойдём до того места, где можно будет четко и равномерно «выбивать» ритм. На этом моменте останавливаем песню, отматываем чуть назад, вновь запускаем прослушивание и, когда будет играть найденный ритмичный кусок, начинаем подыгрывать ему, нажимая на клавишу **t** как можно равномерней и спокойней (можно кликать на мышке, наведя курсор на надпись "Tap here!" в правом углу, но на клавиатуре обычно получаются более точные результаты). Пусть тебя не смущает то, что параметры меняются после каждого тычка, всё равно они ещё не точны. Да и тратить на это стоит не больше десяти-пятнадцати секунд, всё равно потом выправим.

### Выставляем оффсет

Собственно, приблизительный оффсет у нас уже есть, осталось его приблизить к реальному. Перематываем песню на то место, откуда начинали отбивать ритм (на обеих шкалах времени там теперь можно увидеть красненькую полоску), затем смотрим в нижний правый угол: там находится переключатель скорости воспроизведения. Его мы будем использовать, чтобы замедлить трек и услышать точней, когда именно появляется первый звук, под который мы нажимали t. Оффсет выправляется следующим способом: у нас есть метроном (см. в правый верхний угол), который будет тикать в такт выставленному таймингу; **наша задача** — заставить метроном тикнуть ровно в тот момент, когда появляется первый звук из тех, под которые мы выставляли тайминг.

Выбираем 50%, «встаём» незадолго до красной линии и нажимаем пробел. Песня теперь играет в два раза медленней, и услышать расхождение будет проще. Чтобы двигать оффсет, используются стрелочки вверх и вниз рядом с его текущим значением. Обычный клик сдвигает оффсет на 2 мс, если зажать Shift — на 10, а если Ctrl, то на одну миллисекунду. Играемся со стрелками до тех пор, пока разница между звуком в музыке и первым тиком метронома будет практически незаметна.

Может возникнуть закономерный вопрос: почему 50, а не 25? К сожалению, в связи с особенностями замедления песни в редакторе, его лучше не использовать вообще, а подгонять всё с помощью тестов. Чем медленней будет играть песня, тем сильней тайминг на слух будет отличаться от реального, т.е. того, под который можно нормально играть, ударяя по нотам вовремя.

### Выставляем BPM

Теперь у нас есть относительно верный оффсет, и можно проверять BPM (вероятность ошибки меньше). Делается это следующим образом: необходимо прослушать **всю** песню целиком, начиная с того момента, где находится красная линия, до конца, и попутно подгонять метроном. Запускаем прослушивание (ах да, не забудь вернуть скорость обратно на 100%) и заодно слушаем, как тикает метроном. Он не должен ни отставать, ни бежать впереди песни; чтобы это исправлять, нужно кликать по стрелке вниз, если он спешит, и по стрелке вверх, если не успевает (стрелки — те, что около текущего значения BPM). Если возникают какие-то проблемы с нахождением различия, на помощь вновь приходит замедление скорости.

После того, как песня прослушана до конца, смотрим, что у нас получилось. В 99% случаев можно выкинуть тысячные доли и сделать, к примеру, из 145.804 просто 145.8, округление вряд ли повредит. Можно на всякий случай записать старое значение куда-нибудь, а потом уже отлаживать метроном. Проверять лучше всего вблизи конца трека, разница между темпом песни и метронома накопится и будет легко слышна. Перед тем, как оставить BPM с сотыми или десятыми частями, уберите или округлите их и послушайте метроном ещё раз; возможно, они действительно не нужны. Под «ровный», кратный BPM типа 130, 140, 145, 160, 170 и так далее играет большинство электронных треков и другой синтезированной музыки, это делается для удобства сведения треков вместе, да и просто потому, что в аудиоредакторе легче выставить что-то.. простое, как бы банально это не звучало.

### Донастраиваем метроном

Теперь опять немного теории в моём пересказе. Музыка состоит из **тактов** — повторяющихся частей. Повторение не буквальное, а схематическое, т.е. у одинаковых частей будет одна и та же схема звуков (например, «сильный» звук, ударные, просто звук, ударные и опять «сильный» звук). Если есть желание, можно прочитать [статью про музыкальный размер](http://ru.wikipedia.org/wiki/Музыкальный_размер) из Википедии и попробовать немного разобраться, или заглянуть [сюда](https://osu.ppy.sh/community/forums/topics/20998), чтобы посмотреть на совсем небольшую схемку.

Итак, нам нужно найти место, откуда будет «расти» наша линейка, то есть найти сильный бит (на помощь опять приходит [ещё одна статья](http://ru.wikipedia.org/wiki/Доля_(музыка))). Его легко узнать: во время сильного бита исполнители повышают голос, интонация поднимается, в музыке слышны финиши и тому подобные звуки, обозначающие что-то серьёзное. Если сильный бит уже совпадает с тем местом, где находится наша красная линия, это хорошо, и трогать ничего не надо, в противном случае перемещаемся на то место, где сильный бит находится в музыке; при этом мы должны попасть на уже существующий тик верхней шкалы времени (выставьте параметр в правом верхнем углу на 1/2 или 1/4, чтобы не ошибиться). После перемещения туда нажимаем на значение оффсета и попадаем в меню тайминга. Выделяем нашу красную полоску (тут она выглядит как точка) и нажимаем слева кнопку "Use current offset".

Теперь надо поставить красную полоску туда, где начинается ритм песни, потому что логотип osu! и другие элементы пульсируют, ориентируясь на тайминг песни: начинают с того времени, где установлен оффсет, а пульсируют в такт BPM. На всякий случай отметь место, где стоит красная полоска, закладкой или чем-то еще, а затем переместись в начало песни на первый большой белый тик и проделай все то же, что было в предыдущем абзаце. Такой сдвиг сохранит текущий тайминг, если он верен.

Осталось разобраться с размером такта, то есть с тем, как часто в песне появляется сильный бит. При правильной настройке первый тик метронома будет всегда совпадать с сильным битом; если это не так — идём в настройки (F6 или клик по значениям оффсета / BPM) и меняем параметр Time Signature. Самый частый размер — 4/4 («четыре четверти»), далее по популярности следуют 3/4 («три четверти», такт состоит из одного сильного бита и двух слабых) и 6/4, а дальше начинается экзотика, которая, впрочем, тебе вряд ли когда-то встретится.

### Тестирование

Тестирование заключается в том, что мы будем выбивать ноты под свой же тайминг. Нажимаем F1, попадаем на сетку, где будут размещаться ноты. Наша задача — расставить их так, чтобы выбивать их было максимально удобно и чтобы это не влияло на качество.

- Ноты по возможности не должны начинаться сразу с первых секунд. Дайте себе привыкнуть к ритму.
- Чтобы ложных данных было меньше, первые две ноты замените одним или двумя слайдерами (по той же причине, что и выше).
- Расставляйте ноты на белых тиках (кстати, они называются 1/1, красные — 1/2, и так далее) и нигде больше.

Всё это пригодится нам в режиме Test Mode (`F5`), который имеет крайне полезный механизм обратной связи: он будет показывать разницу между тем, когда нота появляется в редакторе (согласно таймингу), и тем, когда её услышали и сыграли мы. Если у тебя нет проблем со слухом, ритмом, реакцией, точностью и звуковой картой (или железом вообще), то можно продолжать дальше, в противном случае от самостоятельного тестирования лучше воздержаться: возможно, оно даст неверные результаты.

Итак, разместили ноты (я обычно раскладываю их в некоторое подобие квадрата из восьми нот), теперь нажимаем `F5` и **аккуратно, равномерно** и **ритмично** отбиваем их. Пара советов:

- При появлении первой же «сотки» (100 очков) вместо 300 тестирование стоит прекратить и начать заново или с другого момента.
- Чем дольше отбиваешь, тем приблизительней результат. Время от времени (~20 - 30 секунд) стоит прерывать тестирование (`F2`) и запускать его с того же места «с нуля» (вновь `F5`).
- Расстановка хлопков туда, где они есть в музыке, может помочь бить чуть точней.

Одновременно с отбиванием нот нужно поглядывать на левую часть окна редактора. Там находится нужная строчка, которая выглядит примерно так: *Mistimed Hits: 38% (ave 17 ms late).*

Первое число — процент неточных попаданий, вторая — усредненная разница между таймингом в редакторе и тем, как мы слышим трек и отбиваем ритм. Слово "late" обозначает то, что мы нажимаем позже, чем «надо» (пока что в кавычках), "early" — раньше. Отбивать стоит до тех пор, пока второе число не прекратит сильно колебаться (максимум — на 2-5 мс). После этого останавливаем тестирование и исправляем оффсет: при слове "late" его нужно **увеличивать** на указанное число (в примере это 17 миллисекунд), а при слове "early" — уменьшать. Не забудь отметить квадратик на панели тайминга ("Move already placed notes when changing the offset/BPM"), иначе ноты после сдвига будут оставаться на старом месте. После нескольких этапов тестирований разница между музыкой и сыгранными нотами уменьшится; значения лучше 4 мс добиваться не стоит, оно мало на что повлияет.

Будем считать, что тестировали мы нормально, били не спеша и без задержек, и оффсет теперь верный. Дальше идёт проверка BPM: если он верен, ноты везде ложатся на музыку и звучат с ней в одно время. Проверять будем точно так же, только теперь ноты, которые мы будем отбивать, разместим в трёх местах: сразу после нашей красной полоски, ближе к концу (когда ритм ещё уловим и хорошо отбиваем<) и где-нибудь на полпути. Тестируем, смотрим результаты: если ближе к концу мы начинаем бить, например, раньше, чем нужно, по мнению редактора, BPM надо чуть увеличить (если позже, то уменьшить). Меняй значение постепенно, по десятым долям, затем по сотым (не забудь сохранить первоначальные настройки на случай ошибки). В конце концов, после нескольких проверок расхождение должно опять-таки приблизиться к нулю.

Стоит также упомянуть шкалу под названием "Score metre" (в русском переводе — шкала точности), на которой показываются удары по нотам и то, насколько они точно следуют музыке. Поскольку параметр "Mistimed Hits" показывает среднее расхождение, а шкала в режиме "Hit Error" (отклонение от нуля) — результат отдельных ударов, при тестировании можно аккуратно посматривать на шкалу и смотреть, в какую сторону уплывает большинство попаданий.

Если всё было сделано верно, то в результате у тебя на руках будет относительно верно затаймленная песня (насколько верно, проверят те, кто будет модить, если, конечно, захотят). Разумеется, стоит делать поправку на опыт и навыки и прекратить читать статью, если никаких проблем с выставленным таймингом не заметно. Впрочем, если ты собираешься делать что-то серьёзное и развиваться в этом направлении, можешь не уходить.

## Мультитайминг

### Вступление

Бывают ситуации, когда одной красной полоски недостаточно. Столкнуться с этим можно, пытаясь таймить рок, метал, любые гитарные композиции, концерты, живые выступления, песни с слышным разгоном / замедлением и прочие подобные вещи. Хоть метроном и выставлен, по твоему мнению, верно, в определённый момент времени ты можешь заметить, что он уже не щёлкает в ритм, а отстаёт или спешит. Сдвиг оффсета или изменение BPM не помогают, а наоборот, портят уже существующий тайминг.

Можно попросить помочь других, но тех, кто умеет работать с мультитаймингом, довольно-таки мало. Более того, люди не будут помогать тебе, если не видят в этом выгоды для себя, не считают твою карту достаточно ценной (действительно, зачем тратить впустую своё время на то, что не будет ранкнуто, например) или просто не любят (неважно, тебя или то, что ты им предлагаешь). Таким образом, если помощи нет, придётся помогать себе самому.

И, пожалуй, последняя фраза: тут без хорошей точности уже **никак** не обойтись.

### Примерная картина

Итак, песня меняет свой темп. Успешный тайминг в таком случае означает то, что мы найдём все места, где меняется ритм, и правильно отразим это в редакторе (выставим нужные оффсеты и BPM). Помогать в этом нам будет опять-таки режим тестирования и всё тот же параметр, отвечающий за расхождение между музыкой и нотами в редакторе, а работать с песней мы будем по такому плану:

1. Убедиться, что параметры текущей точки выставлены максимально хорошо.
2. Начать отбивать ноты и следить за расхождением. Когда оно начнёт изменяться, остановиться.
3. Протестировать тайминг еще несколько раз. Если эффект повторяется на том же месте, начать тестирование ближе к моменту расхождения.
4. Если скачок резкий и это **не** результат раннего / позднего попадания, добавить новый оффсет после ноты со сдвигом в нужное количество миллисекунд.
5. Если скачка нет, а расхождение начало постепенно расти, добавить новый оффсет и изменять BPM. Делать это придётся на слух (`F3`), то есть слушать метроном и постараться отловить изменение ритма, затем оттестировать его, как обычный одиночный оффсет. В отличие от традиционных и равномерных песен, BPM здесь может быть любым (в пределах разумного), главное, чтобы он «держался» как можно дольше.
6. После любых изменений тайминга нужно реснапнуть ноты для тестирования, т.е. приклеить их на новые тики. Делается это через верхнее меню: Timing → Resnap All Notes. После этого нужно вручную проверить все ноты, так как они могут сдвинуться и попасть не на те тики.
7. Продолжить тестирование, перейдя к пункту 1.

Этот цикл нужно повторять, пока песня не кончится. На выходе мы получим шкалу времени с красными полосками на ней. В зависимости от песни и от навыка игры, полосок может быть как больше, так и меньше (говоря о навыке, больше полосок не всегда значит «лучше»). Впрочем, если все сделано верно, то под текущий тайминг уже можно мапать.

Для тайминга ускорений / замедлений примерный алгоритм немного другой:

1. Найди место, где песня ускоряется / замедляется. Поставь там новый оффсет (по возможности, на белом тике), увеличь масштаб шкалы (Alt + колёсико вверх);
2. Через два бита (белых тика) поставь ноту с каким-нибудь хитсаундом (к примеру, финиш из мягкого сэмплсета). Замедли песню и прослушай несколько раз, как нота звучит вместе с песней. В зависимости от расхождения, аккуратно сдвигай ноту по шкале времени, зажав Shift, и слушай заново, пока не найдёшь наиболее оптимальное место для нее;
3. Выдели ноту и дважды кликни по ней, следя, чтобы она не сдвинулась с места. Поставь на её месте новый оффсет;
4. Вернись на область с предыдущей полоской тайминга, «встань» ровно на тик (неважно, какой), а затем перейди на следующую. Сравни время в левом нижнем углу с тем, которое выставлено на оффсете;
5. Увеличь / уменьши BPM прошлой точки, затем выполни пункт 4. Твоя цель — убрать разницу между двумя оффсетами, изменяя только BPM первого и не двигая второй;
6. После того, как первая точка из двух будет выправлена, переходи к пункту 2.

Повторять, пока ускорение / замедление не закончится и BPM не перестанет меняться. После этого стоит расставить ноты и сыграть их несколько раз как можно лучше, результаты использовать для отладки. Чаще всего приходится изменять большинство точек, но значительно — лишь одну-две (остальные изменения будут только делать так, чтобы другие секции начинались ровно на белых тиках).

### Улучшение результата

Если желание помочь себе ещё не ушло, то теперь нужно перепроверить все точки тайминга и, возможно, убрать ненужные. Для этого расставляем ноты на протяжении всей карты (можно расставить один паттерн, а потом его копировать; следи только, чтобы ноты не слипались и попадали на правильные тики) и начинаем играть. Любые ошибки и нестыковки исправляем, ориентируясь опять-таки на расхождение, на свои ощущения и на текущий тайминг.

Этот процесс долог и мучителен, именно приближение мультитайминга к идеальному занимает бо́льшую часть времени. Тебе придётся тестировать одни и те же куски песни по нескольку раз (временами попыток будет около десяти), тестировать их подряд или по очереди, переслушивать и стремиться, чтобы расхождение стремилось к нулю или к всё тем же 3-5 миллисекундам. Здесь опять-таки стоит дать несколько важных советов:

- **Перед любым изменением тайминга делай бэкап.** Что угодно: закладка, копия файла .osu, копирование тайминга в блокнот, запись на бумажке, главное, чтобы это можно было восстановить в случае ошибки.
- **Не забывай реснапать ноты.**
- **Чаще сохраняй результат.**
- **Не ориентируйся только на слух,** это означает неточные и зачастую неверные результаты. Таймить только на слух **нельзя,** хотя бы потому, что в разные моменты времени один и тот же кусок песни будет воспринят тобой по-разному. Словом, надо ориентироваться на результаты тестирования, а не на слух.
- **Расхождение меньше трёх миллисекунд ничего не значит и может быть пропущено.** Начинать беспокоиться следует с 5 или 6 мс.
- **Сделай перерыв, если результаты получаются каждый раз разные.**
- **Не тестируй тайминг, играя стримы или джампы: результаты будут неверными даже при сплошных «трёхсотках».**
- **Лучше правильно и точно затаймить, чем следить за правильностью шкалы.** Это означает, что ставить красную линию можно в любой момент, но только если того требует тайминг. Если линия установлена не на сильном бите, то его следует восстановить как можно скорей, поставив точку с тем же BPM на ближайшем тике, где должен быть сильный бит. Если новые оффсеты появляются чаще, чем раз в такт, этим можно пренебречь.
- **Не стоит торопиться ставить новые точки.** Лучше запустить тест несколько раз и тогда убедиться в том, что новая секция действительно нужна.
- Вместо нового оффсета (если это только не резкий скачок) **иногда лучше попробовать смену BPM;** при этом надо следить, чтобы начало секции оставалось правильно затаймленным.

## Эпилог

Помогать другим с таймингом стоит **только** в том случае, если:

- ошибки значительны,
- имеется опыт помощи и опыт тайминга и
- ты уверен(а) в своих силах и знаешь, что делаешь и советуешь.

Само собой, после появления этого руководства вырастет количество неправильно и ошибочно затаймленных карт, а также может увеличиться количество «помощников», но без подробного описания многим не обойтись.
